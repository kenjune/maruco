<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚¹ã‚­ãƒ«è¨­å®šUI</title>
<style>
  body { 
    font-family: 'MS Gothic', 'Courier New', monospace;
    text-align: center;
    max-width: 700px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(to bottom, #1a0f2e 0%, #2d1b4e 100%);
    color: #f0e6d2;
    min-height: 100vh;
  }
  
  h2 {
    font-size: 28px;
    text-shadow: 2px 2px 4px #000;
    color: #ffd700;
    letter-spacing: 3px;
    margin-bottom: 30px;
    border-bottom: 3px solid #8b7355;
    padding-bottom: 10px;
  }
  
  .group { 
    margin-bottom: 25px;
    background: rgba(0, 0, 0, 0.4);
    padding: 15px;
    border: 2px solid #8b7355;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
  }
  
  .group::before {
    content: attr(data-label);
    display: block;
    font-size: 16px;
    color: #ffd700;
    margin-bottom: 10px;
    font-weight: bold;
    text-shadow: 1px 1px 2px #000;
  }
  
  button {
    margin: 4px;
    padding: 10px 18px;
    font-family: 'MS Gothic', 'Courier New', monospace;
    font-size: 14px;
    font-weight: bold;
    background: linear-gradient(to bottom, #4a3828 0%, #2d2416 100%);
    color: #f0e6d2;
    border: 2px solid #8b7355;
    border-radius: 5px;
    cursor: pointer;
    text-shadow: 1px 1px 2px #000;
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }
  
  button:hover:not(.disabled) {
    background: linear-gradient(to bottom, #5a4838 0%, #3d3426 100%);
    border-color: #a08060;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
  }
  
  button.selected {
    background: linear-gradient(to bottom, #8b6914 0%, #5d4610 100%);
    color: #fff;
    border-color: #d4af37;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
  }
  
  button.disabled {
    background: #3a3a3a;
    color: #666;
    border-color: #555;
    pointer-events: none;
    opacity: 0.5;
  }
  
  .confirm-row {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  #confirm {
    padding: 15px 40px;
    font-size: 18px;
    background: linear-gradient(to bottom, #c79100 0%, #8b6500 100%);
    color: #fff;
    border: 3px solid #ffd700;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
  }
  
  #confirm:hover {
    background: linear-gradient(to bottom, #d7a100 0%, #9b7500 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.7);
  }

  #randomBtn {
    padding: 15px 30px;
    font-size: 18px;
    background: linear-gradient(to bottom, #7b2d9e 0%, #4e1a6b 100%);
    color: #fff;
    border: 3px solid #c77dff;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
  }

  #randomBtn:hover {
    background: linear-gradient(to bottom, #9b4dbf 0%, #6e3a8b 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.7);
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%      { transform: translateX(-6px); }
    40%      { transform: translateX(6px); }
    60%      { transform: translateX(-4px); }
    80%      { transform: translateX(4px); }
  }
  #result.shaking {
    animation: shake 0.4s ease;
  }
  
  #result {
    margin-top: 25px;
    font-weight: bold;
    white-space: pre-line;
    background: rgba(0, 0, 0, 0.6);
    padding: 20px;
    border: 3px solid #ffd700;
    border-radius: 8px;
    font-size: 18px;
    color: #ffd700;
    text-shadow: 2px 2px 4px #000;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
    min-height: 60px;
    text-align: center;
  }

  #result.random-mode {
    border-color: #c77dff;
    color: #e0b4ff;
    text-shadow: 0 0 8px rgba(199, 125, 255, 0.5);
  }

  #resultJa {
    margin-top: 12px;
    font-weight: bold;
    white-space: pre-line;
    background: rgba(0, 0, 0, 0.6);
    padding: 20px;
    border: 3px solid #ffd700;
    border-radius: 8px;
    font-size: 18px;
    color: #ffd700;
    text-shadow: 2px 2px 4px #000;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
    min-height: 60px;
    text-align: center;
    display: none;
  }
  #resultJa.visible {
    display: block;
  }
</style>
</head>
<body>

<h2>âš” ã‚¹ã‚­ãƒ«è¨­å®š âš”</h2>

<div class="group" data-key="skillType" data-label="ã€ã‚¹ã‚­ãƒ«ã‚¿ã‚¤ãƒ—ã€‘">
  <button>æ”»æ’ƒ</button>
  <button>é˜²å¾¡</button>
  <button>HPå›å¾©</button>
</div>

<div class="group" data-key="target" data-label="ã€å¯¾è±¡ã€‘">
  <button>æ•µ</button>
  <button>å‘³æ–¹</button>
</div>

<div class="group" data-key="range" data-label="ã€å¯¾è±¡ç¯„å›²ã€‘">
  <button>ãƒ©ãƒ³ãƒ€ãƒ </button>
  <button>ç¯„å›²å†…</button>
  <button>HPé«˜</button>
  <button>HPä½</button>
  <button>æ”»æ’ƒé«˜</button>
  <button>æ”»æ’ƒä½</button>
  <button>é˜²å¾¡é«˜</button>
  <button>é˜²å¾¡ä½</button>
</div>

<div class="group" data-key="count" data-label="ã€äººæ•°ã€‘">
  <button>1äºº</button>
  <button>2äºº</button>
  <button>3äºº</button>
  <button>5äºº</button>
</div>

<div class="group" data-key="valueType" data-label="ã€ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆã€‘">
  <button>10</button><button>20</button><button>30</button>
  <button>40</button><button>50</button><button>60</button>
  <button>70</button><button>80</button><button>90</button>
</div>

<div class="group" data-key="pointType" data-label="ã€ãƒã‚¤ãƒ³ãƒˆã€‘">
  <button>1000</button>
  <button>2000</button>
  <button>3000</button>
  <button>5000</button>
</div>

<div class="confirm-row">
  <button id="confirm">âš¡ æ±ºå®š âš¡</button>
  <button id="randomBtn">ğŸ² ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆ ğŸ²</button>
</div>

<div id="result"><span id="resultEn"></span></div>
<div id="resultJa"></div>

<script>
const state = {};

document.querySelectorAll('.group').forEach(group => {
  const key = group.dataset.key;
  group.querySelectorAll('button').forEach(btn => {
    btn.addEventListener('click', () => {
      group.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      state[key] = btn.textContent;

      if (key === 'valueType') clearGroup('pointType');
      if (key === 'pointType') clearGroup('valueType');
    });
  });
});

function clearGroup(key) {
  const group = document.querySelector(`[data-key="${key}"]`);
  group.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
  delete state[key];
}

document.getElementById('confirm').addEventListener('click', () => {
  if (!validateState()) return;
  showResult(buildJapanese(state), null, false);
});

document.getElementById('randomBtn').addEventListener('click', () => {
  const rand = generateRandomState();
  applyStateToUI(rand);
  showResult(buildEnglish(rand), buildJapanese(rand), true);
});

function showResult(textEn, textJa, isRandom) {
  const el   = document.getElementById('result');
  const elEn = document.getElementById('resultEn');
  const elJa = document.getElementById('resultJa');

  el.classList.remove('shaking', 'random-mode');
  elJa.classList.remove('visible');
  void el.offsetWidth;

  elEn.textContent = textEn;

  if (isRandom) {
    el.classList.add('random-mode');
    elJa.textContent = textJa || '';
    elJa.classList.add('visible');
  }

  el.classList.add('shaking');
}

function validateState() {
  const required = ['skillType', 'target', 'range', 'count'];
  for (let key of required) {
    if (!state[key]) {
      alert('ã™ã¹ã¦ã®é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„');
      return false;
    }
  }
  if (!state.valueType && !state.pointType) {
    alert('ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆã‹ãƒã‚¤ãƒ³ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„');
    return false;
  }
  return true;
}

function generateRandomState() {
  const pick = arr => arr[Math.floor(Math.random() * arr.length)];

  const skillType = pick(['æ”»æ’ƒ', 'é˜²å¾¡', 'HPå›å¾©']);
  const target    = pick(['æ•µ', 'å‘³æ–¹']);
  const range     = pick(['ãƒ©ãƒ³ãƒ€ãƒ ','ç¯„å›²å†…','HPé«˜','HPä½','æ”»æ’ƒé«˜','æ”»æ’ƒä½','é˜²å¾¡é«˜','é˜²å¾¡ä½']);
  const count     = pick(['1äºº', '2äºº', '3äºº', '5äºº']);

  const usePercent = Math.random() < 0.5;
  const valueType  = usePercent ? pick(['10','20','30','40','50','60','70','80','90']) : null;
  const pointType  = usePercent ? null : pick(['1000','2000','3000','5000']);

  return { skillType, target, range, count, valueType, pointType };
}

function applyStateToUI(s) {
  document.querySelectorAll('.group button').forEach(b => b.classList.remove('selected'));

  const mapping = {
    skillType: s.skillType,
    target:    s.target,
    range:     s.range,
    count:     s.count,
    valueType: s.valueType,
    pointType: s.pointType
  };

  Object.entries(mapping).forEach(([key, val]) => {
    if (!val) return;
    const group = document.querySelector(`[data-key="${key}"]`);
    group.querySelectorAll('button').forEach(btn => {
      if (btn.textContent === val) btn.classList.add('selected');
    });
  });

  Object.assign(state, { skillType: s.skillType, target: s.target, range: s.range, count: s.count });
  if (s.valueType) { state.valueType = s.valueType; delete state.pointType; }
  else             { state.pointType = s.pointType; delete state.valueType; }
}

function buildEnglish(s) {
  const skillTypeMap = { 'æ”»æ’ƒ': 'Attack', 'é˜²å¾¡': 'Defense', 'HPå›å¾©': 'Cure' };
  const rangeMap = {
    'ãƒ©ãƒ³ãƒ€ãƒ ': 'Randomly chosen',
    'ç¯„å›²å†…':  'Within range',
    'HPé«˜':    'Highest HP',
    'HPä½':    'Lowest HP',
    'æ”»æ’ƒé«˜':  'Highest ATK',
    'æ”»æ’ƒä½':  'Lowest ATK',
    'é˜²å¾¡é«˜':  'Highest DEF',
    'é˜²å¾¡ä½':  'Lowest DEF'
  };
  const targetMap = { 'æ•µ': 'enemy', 'å‘³æ–¹': 'allies' };
  const countMap  = { '1äºº': '1', '2äºº': '2', '3äºº': '3', '5äºº': '5' };

  const sign  = s.target === 'æ•µ' ? '-' : '+';
  const value = s.valueType ? `${sign}${s.valueType}%` : `${sign}${s.pointType}P`;

  return (
`Effect : ${skillTypeMap[s.skillType]} ${value}
Target : ${rangeMap[s.range]} ${targetMap[s.target]} Ã— ${countMap[s.count]}`
  );
}

function buildJapanese(s) {
  const rangeMap = {
    'ãƒ©ãƒ³ãƒ€ãƒ ': 'ãƒ©ãƒ³ãƒ€ãƒ ãª',
    'ç¯„å›²å†…':  'ç¯„å›²å†…ã®',
    'HPé«˜':    'HPãŒæœ€ã‚‚é«˜ã„',
    'HPä½':    'HPãŒæœ€ã‚‚ä½ã„',
    'æ”»æ’ƒé«˜':  'æ”»æ’ƒåŠ›ãŒæœ€ã‚‚é«˜ã„',
    'æ”»æ’ƒä½':  'æ”»æ’ƒåŠ›ãŒæœ€ã‚‚ä½ã„',
    'é˜²å¾¡é«˜':  'é˜²å¾¡ãŒæœ€ã‚‚é«˜ã„',
    'é˜²å¾¡ä½':  'é˜²å¾¡ãŒæœ€ã‚‚ä½ã„'
  };

  const sign  = s.target === 'æ•µ' ? '-' : '+';
  const value = s.valueType ? `${sign}${s.valueType}%` : `${sign}${s.pointType}P`;
  const rangeText = rangeMap[s.range] || s.range;

  return (
`åŠ¹æœ: ${s.skillType}${value}
å¯¾è±¡: ${rangeText}${s.target}${s.count}`
  );
}
</script>

</body>
</html>
